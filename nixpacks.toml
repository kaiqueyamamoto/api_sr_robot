# Nixpacks Configuration for SR Robot API

[phases.setup]
nixPkgs = ["go_1_24"]

[phases.install]
cmds = ["go mod download"]

[phases.build]
cmds = [
  "go install github.com/swaggo/swag/cmd/swag@latest",
  "~/go/bin/swag init -g main.go --output ./docs || swag init -g main.go --output ./docs || echo 'Swagger generation skipped'",
  "go build -o chatserver main.go"
]

[start]
cmd = "./chatserver"

