# Nixpacks Configuration for SR Robot API
# https://nixpacks.com/docs/configuration

[phases.setup]
nixPkgs = ["go_1_24", "nodejs", "git"]

[phases.install]
cmds = [
  "go mod download",
  "go install github.com/swaggo/swag/cmd/swag@latest"
]

[phases.build]
cmds = [
  "swag init -g main.go --output ./docs",
  "go build -o chatserver main.go"
]

[start]
cmd = "./chatserver"

[variables]
GO_ENV = "production"
GIN_MODE = "release"

